/*! ractive-adaptors-stapes - v0.0.1 - 2015-04-17
* Copyright (c) 2015 ; Licensed MIT */
!function(t,e){"function"==typeof define&&define.amd?define(["stapes","ractive"],e):"object"==typeof exports?module.exports=e(require("stapes"),require("ractive")||{}):e(t.Stapes,t.Ractive)}(this,function(t,e){"use strict";function n(t){return t[i]=(t[i]||0)+1,function(){t[i]-=1,t[i]||delete t[i]}}function o(t){return!!t[i]}var r,i="_ractiveAdaptorsStapesLock";r={Stapes:t,filter:function(e){if(!r.Stapes)throw new Error("Could not find Stapes. You must call adaptor.init(Stapes)");return e instanceof t._.Module},wrap:function(e,r,i,a){function u(t){var o=n(f),r={};r[t.key]=t.newValue,e.set(a(r)),o()}var f=r;return f.on("mutate",u),{teardown:function(){f.off("mutate",u)},get:function(){return f.getAll()},set:function(t,e){o(f)||-1!==t.indexOf(".")||f.set(t,e)},reset:function(e){return e instanceof t._.Module||!(e instanceof Object)?!1:void f.set(e)}}}},e.adaptors.Stapes=r});